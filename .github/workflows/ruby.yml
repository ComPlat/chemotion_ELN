name: ELN GitHub Actions 3

on:
  push:
    branches: [ github-actions ]

  workflow_dispatch:

jobs:

  docker_container:
    runs-on: ubuntu-latest
    container: 
      image: complat/complat-ubuntu-runner:0.12.20
    #   #options: --mount type=bind,source=/,target=/__w/chemotion_ELN/chemotion_ELN
      #options: --mount type=bind, source=/home/gitlab-runner, target=/home/runner/work/chemotion_ELN/chemotion_ELN
      #options: -v "/__w/chemotion_ELN/chemotion_ELN":"/home/gitlab-runner"
      #image: maipy/github_actions:xs
      # volumes:
      #   - /home/gitlab-runner
        # - ${{ github.workspace }}:/home/gitlab-runner
      #image: azul/zulu-openjdk-alpine:8-jre
    steps:
      # first checkout, before working dir is removed
      # - name: checkout
      #   uses: actions/checkout@v2
      #   with:
      #     repository: ComPlat/chemotion_ELN
      #     path: /github/home
      - name: git clone
        working-directory: /home/gitlab-runner
        run: |
            #cd /home/gitlab-runner
            sudo git clone --branch development --depth 1 https://github.com/ComPlat/chemotion_ELN.git 
            echo "POSTGRES"
            which psql
            psql --version
            postgres pg_ctlcluster 12 main status
            #psql -d postgresql://postgres:postgres@localhost/postgres -c "\du"
            #sudo -u postgres pg_ctlcluster 12 main status
            # echo "ALLL FILES?"
            # whoami
            # pwd 
            # ls -la