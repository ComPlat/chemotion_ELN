name: ELN GitHub Actions 3

on:
  push:
    branches: [ github-actions ]

  workflow_dispatch:

jobs:
  docker_cp:
    runs-on: ubuntu-latest
    steps:
      - name: docker cp
        run: |
            docker pull complat/complat-ubuntu-runner:0.10.20
            docker cp $(docker run -it -d complat/complat-ubuntu-runner:0.10.20):/home/gitlab-runner .
            pwd
            ls
      - name: Upload Docker artifacts
        uses: actions/upload-artifact@v2
        with:
          # name: test
          # path:  gitlab-runner/Gemfile
          name: docker_files
          path: .

  docker_container:
    runs-on: ubuntu-latest
    container: 
      image: complat/complat-ubuntu-runner:0.10.20
      #options: -v "/home/gitlab-runner":"/__w/chemotion_ELN/chemotion_ELN"
      # image: maipy/github_actions:0
      # volumes:
      #   - /home/gitlab-runner
        # - ${{ github.workspace }}:/home/gitlab-runner
    # container:
    #   image: azul/zulu-openjdk-alpine:8-jre
    steps:
      - name: Download build artifacts
        uses: actions/download-artifact@v2
        with:
          name: docker_files
          path: .
      - name: docker
      # uses: docker://complat/complat-ubuntu-runner:0.10.20
        run: |
            # docker pull maipy/github_actions:0
            # docker exec -i $(docker run -it -d maipy/github_actions:0) bash
            #cd ${{ github.workspace }}
            whoami
            pwd
            ls -la
            #java -version
            # cd /github/home
            # pwd
            # ls -la
            # echo "DOCKER IMAGES"
            # docker images
            # echo "DOCKER CONTAINERS"
            # docker ps -a
        #working-directory: /github/home
